% !TeX root = Thesis.tex
\chapter{Persistence Homology 101}

\begin{definition}
A \emph{persistence module} is a collection of finite-dimensional vector spaces $V_t$ over a field $\FF$, for $t \in \R$, as well as a collection of linear maps
\begin{equation}
\pi_{ts} \colon V_t \to V_s, \quad t\leq s,
\end{equation}
satisfying the rules $\pi_{sr} \circ \pi_{ts} = \pi_{tr}$ and $\pi_{tt} = \id_{V_t}$.

The examples that will be discussed in the sequence also satisfy the following assumptions.
\begin{enumerate}[label=\roman*)]
\item\label{pm1} For all but finitely many $t \in \R$, there exists a neighborhood $U$ of $t$ such that $\pi$ is an isomorphism for all pairs of indices in $U$,
\item\label{pm2} \textit{(Semicontinuity)} For all $t \in \R$, there exists $\varepsilon > 0$ such that $\pi_{rt}$ is an isomorphism for $t-\varepsilon < r \leq t$.
\end{enumerate}

It is easy to show as a consequence of \ref{pm1} that $V_t$ takes finitely many values up to isomorphism. In particular, for $t$ close enough to $+\infty$, all $V_t$ can be simultaneously identified with the same vector space, which we call $V_+$. The same could be done for $t$ close to $-\infty$ to identify all such $V_t$ with a vector space $V_-$. However, we add the following hypothesis, which trivializes $V_-$:

\begin{enumerate}[resume*]
\item\label{pm3} For $t$ close enough to $-\infty$, $V_t = 0$.
\end{enumerate}

A persistence module which satisfies \ref{pm1}, \ref{pm2} and \ref{pm3} is said to be \emph{of finite type}.
\end{definition}

Persistence modules of finite type have a very simple structure.

Let $\sigma_1 < \dots < \sigma_N$ be the finite collection of real numbers that property \ref{pm1} refers to, i.e. those around which there is no neighborhood on which $\pi$ is an isomorphism. A simple topological argument shows that $\pi_{ts}$ is an isomorphism for $\sigma_i < t \leq s < \sigma_{i+1}$, $i = 1, \dots, N-1$. In other words, all such $V_t$, $t \in \ointerval{\sigma_i}{\sigma_{i+1}}$ can be canonically identified. The same argument holds for $i = 0$ and $i = N$, if we add the conventions that $\sigma_0 = -\infty$ and $\sigma_{N+1} = \infty$. In other words, property \ref{pm1} is ensuring that, in some sense, $V_t$ `only takes finitely many values'.

In turn, property \ref{pm2}, semicontinuity, is telling us what the behavior at the border points looks like. It guarantees that each $V_{\sigma_i}$ is the same as those for $t$ slightly below it. In other words, while property \ref{pm1} guarantees that $V_t$ is essentially the same for $t \in \ointerval{\sigma_i}{\sigma_{i+1}}$, semicontinuity adds the upper extremum, ensuring that $V_t$ is canonically isomorphic for $t \in \linterval{\sigma_i}{\sigma_{i+1}}$.

Note the edge case $i = N$, in which we obtain an interval of the form $\linterval{\sigma_N}{+\infty}$. This suggests that closing the real line on the right, considering $\R \cup \{+\infty\}$ instead of $\R$, might be a natural choice, but instead we choose to follow \cite{polterovich} and simply adopt the convention that an interval of the form $\linterval{a}{+\infty}$ should be taken to mean the same as $\ointerval{a}{+\infty}$.

Finally, property \ref{pm3} guarantees that the very first of these vector spaces, $V_t$ for $t \leq \sigma_1$, is the trivial space.

It is possible to continue this study, obtaining ever simpler forms of representing finite-type persistence modules, culminating in the so-called Normal Form Theorem, which states that these persistence modules can be represented by particularly simple objects called barcodes.

\begin{definition}
A \emph{barcode} is a finite multiset\footnote{A multiset is a set whose elements are counted with multiplicity.} of intervals in $\R$, of the form $\linterval a b$, where $-\infty < a < b \leq +\infty$. Mind the convention: $\linterval a {+\infty}$ means the same as $\ointerval a {+\infty}$.
\end{definition}

\begin{definition}\label{def:pmfrombarcode}
Let $B$ be a barcode. We define $\FF(B)$ to be the persistence module defined as follows.

Index the intervals in $B$ as $I_1, I_2, \dots, I_N$. For each $t \in \R$, let $\Ix(t)$ be the collection of indices $i$ such that $t \in I_i$. Define $\FF(B)_t$ as the vector space generated by $\Ix(t)$, i.e. which has $\Ix(t)$ as a basis.

We now define $\pi_{ts}$, for $t \leq s$. To this effect, note that, since $\Ix(t)$ is a basis for $\FF(B)_t$, it suffices to define $\pi_{ts}(i)$ for $i \in \Ix(t)$. We define it as
\begin{equation}
\pi_{ts}(i) = \begin{cases} i & i \in \Ix(s),\\ 0 & \text{otherwise}. \end{cases}
\end{equation}
\end{definition}

It is easy to check that $\FF(B)$ is a finite-type persistence module. The convexity of intervals guarantees that the $\pi$ functions compose as they should. The fact that there are finitely many intervals ensures property \ref{pm1}. The fact that the intervals are open on the left and closed on the right ensures property \ref{pm2}, semicontinuity, and the fact that the lower extremum cannot be $-\infty$ ensures property \ref{pm3}.

The normal form theorem ensures that any finite-type persistence module is isomorphic to $\FF(B)$ for some unique barcode $B$.

\begin{definition}
A homorphism $h \colon V \to W$ of persistence modules is a collection of linear maps $h_t \colon V_t \to W_t$ such that all diagrams of the following form commute.
\begin{equation}
\begin{tikzcd}
V_t \arrow[d, "h_t"] \arrow[r, "\pi_{ts}"] & V_s \arrow[d, "h_s"] \\
W_t \arrow[r, "\pi_{ts}"]                  & W_s                 
\end{tikzcd}
\end{equation}

An isomorphism of persistence modules is a homomophism $h$ of persistence modules such that each $h_t$ is an isomorphism. In this case, the inverse $h^{-1}$ is also an isomorphism of persistence modules.
\end{definition}

\begin{theorem}[Normal form theorem]
Let $V$ be a persistence module of finite type. Then, there exists a unique barcode $B$ such that $V$ is isomorphic to $\FF(B)$.
\end{theorem}

The normal form theorem allows us to represent certain types of data (time-dependent vector spaces) as a simple combinatorial object (barcodes). Therefore, given a space $X$ which may be `grown continuously from the empty set', i.e. written as an increasing union $X = \bigcup_{t \in \R} X_t$, and an invariant $V$ which may be associated to the spaces $X_t$ via vector spaces, we may represent this invariant $V(X_t)$ varying in time in a concise way via a barcode, thereby condensing a fair amount of information about the space $X$ in a simple object.