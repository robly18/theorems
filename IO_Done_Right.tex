\documentclass{article}

\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage[utf8]{inputenc}
\usepackage[portuguese]{babel}
\usepackage{tikz}

\addto\captionsportuguese{
	\renewcommand*{\proofname}{Dem}
}

\title{IO Done Right}
\author{Duarte Maia}
\date{}

\newcommand{\R}{\mathbb{R}}

\newtheorem{teorema}{Teorema}
\newtheorem{prop}{Prop}

\theoremstyle{definition}
\newtheorem{definition}{Definição}
\newtheorem*{notacao}{Notação}


\begin{document}
	\maketitle
	
	\tableofcontents
	
	\section{Introdução}
	
	TODO: Escrever palavras motivadoras ou algo assim
	
	\section{Prerequisitos}
	
	Vou aqui escrevendo coisas à medida que elas são necessárias.
	
	Obviamente é preciso saber um pouco de cálculo I e AL.
	
	\section{Problemas de Otimização Linear}
	
	\subsection{Introdução}
	
	Um problema de otimização é um tipo específico de problema em que o objetivo é minimizar ou maximizar uma certa função (função-objetivo), dentro de um certo domínio, usualmente (no contexto desta cadeira) um subconjunto de $\R^n$ parametrizado por um conjunto de (in)equações.
	
	Mais concretamente, o tipo de problemas com que se lida nesta cadeira são problemas de otimização linear. Estes são problemas em que a função-objetivo é uma função linear $\R^n \rightarrow \R$ e todas as condições no domínio são da forma $ax \leq b$, $ax = b$ ou $ax \geq b$, onde $a$ é um vetor-linha e $b$ é um escalar.
	
	\begin{definition}
	Um \emph{problema de otimização linear} (normalmente abreviado a \emph{pol}) é um problema da forma:
	
	\textbf{Objetivo: } maximizar/minimizar (em função de $x \in \R^n$) o valor de ${c_1 x_1 + c_2 x_2 + \ldots + c_n x_n}$
	
	\textbf{Restrições: } $x$ tem de obedecer a todas as seguintes igualdades

\[
\begin{cases}
	a_{11} x_1 + a_{12} x_2 + \ldots + a_{1n} x_n = b_1 \\ 
	a_{21} x_1 + a_{22} x_2 + \ldots + a_{2n} x_n = b_2 \\
	\vdots \\
	a_{p1} x_1 + a_{p2} x_2 + \ldots + a_{pn} x_n = b_p
\end{cases}
\]

E todas as seguintes desigualdades

\[
\begin{cases}
	a'_{11} x_1 + a'_{12} x_2 + \ldots + a'_{1n} x_n \leq b'_1 \\ 
	\vdots \\
	a'_{q1} x_1 + a'_{q2} x_2 + \ldots + a'_{qn} x_n \leq b'_q
\end{cases}
\]
\[
\begin{cases}
	a''_{11} x_1 + a''_{12} x_2 + \ldots + a''_{1n} x_n \geq b''_1 \\ 
	\vdots \\
	a''_{r1} x_1 + a''_{r2} x_2 + \ldots + a''_{rn} x_n \geq b''_r
\end{cases}
\]
	\end{definition}
	
	Infelizmente, isto é algo trabalhoso de escrever. Como tal, normalmente estas condições são escritas de forma mais compacta usando a linguagem da álgebra linear.
	
	\begin{notacao}
Dados dois vetores $x,y \in \R^n$, dizemos $x \leq y$ se $x_i \leq y_i$ para todo $i$.
	\end{notacao}
	\begin{notacao}
	Considere-se o pol escrito acima. Este é normalmente escrito da seguinte forma:
	
	(Supõe tratar-se de um problema de maximização; caso contrário escreva-se $\min$ no lugar de $\max$)
	
	Seja $c$ o vetor linha $[\,c_1\,c_2\, \cdots \,c_n\,]$,

	$A$ a matriz $p \times n$ cujo $i,j$-ésimo elemento é $a_{ij}$, e considerações análogas para $A'$ a $A''$, com $a'_{ij}$ e $a''_{ij}$ respetivamente
	
	$b$ o vetor coluna $(b_1, b_2, \cdots, b_n)$ e análogamente para $b'$ e $b''$.
	
	\[
	\begin{cases}
	\max\limits_x cx \\
	Ax = b \\
	A'x \leq b' \\
	A''x \geq b''
	\end{cases}
	\]
	\end{notacao}
	
	Normalmente, não é útil considerar um tipo de problema tão geral, pelo que discutímos em baixo formas de passar de um tipo de problemas para outros.
	
	\subsection{Tradução}
	
	Considere-se os seguintes problemas de otimização linear:
	
	\[
	\begin{cases}
	\max\limits_x 2x_1 - 3x_2 \\
	5x_1 + x_2 = 6 \\
	2x_1 + 0x_2 \leq 2
	\end{cases}
	\begin{cases}
	\min\limits_x -2x_1 + 3x_2 \\
	5x_1 + x_2 \leq 6 \\
	5x_1 + x_2 \geq 6 \\
	-2x_1 + 0x_2 \geq -2
	\end{cases}
	\]
	
	Apesar de terem uma aparência diferente, alguma inspeção leva à conclusão que estes são, na realidade, exatamente o mesmo problema. Ou seja, o mesmo problema pode ser representado de mais do que uma forma diferente. Isto leva à possibilidade de considerar `formas canónicas' de expressar os problemas, que sejam mais fáceis de estudar. Se, por exemplo, dissermos que todos os problemas da forma XYZ podem ser resolvidos fazendo ABC, e arranjarmos forma de traduzir qualquer pol para esta forma XYZ, estamos numa boa situação.
	
	\begin{notacao}
	Dado um pol $P$, o conjunto de $x \in \R^n$ que satisfazem as suas condições é denominado de \emph{conjunto admissível de $P$}, representado por $X_P$, ou só $X$ se o pol em questão for óbvio de contexto.
	
	Da mesma forma, o \emph{conjunto solução de $P$}, $S_P$, ou $S$ se $P$ é claro de contexto, é o conjunto de $x \in X$ que maximizam, de facto, a função objetivo. Por outras palavras,
	
	\[S_P = \{\,x \in X_p \mid \forall_{y \in X_p} cx \geq cy\,\}\]
	
	Isto no caso de maximização. No caso de minimização, a desigualdade deve estar trocada.
	\end{notacao}
	
	Há várias formas possíveis de transformar um problema noutro.
	
	\subsubsection{Substituição de equivalências}
	
	Por exemplo, a condição de igualdade $a = b$ pode ser expressa como duas desigualdades: $a \leq b$ e $a \geq b$. Assim sendo, sabemos à partida que qualquer pol que nos venha à cabeça pode ser expresso só com condições de desigualdade.
	
	Para mais, a desigualdade $a \geq b$ é equivalente a $-a \leq -b$. Logo, podemos sempre assumir que as condições que restringem um pol são sempre da forma $Ax \leq b$.
	
	Podemos também assumir sem perda de generalidade que um problema de otimização linear é um problema de maximização, pois minimizar $cx$ é o mesmo que maximizar $-cx$.
	
	Logo, dado um pol qualquer, podemos sempre assumir, sem perda de generalidade, que é da forma
	
	\[
	\begin{cases}
	\max\limits_x cx\\
	Ax \leq b
	\end{cases}
	\]
	
	A esta forma vamos-nos referir, no futuro, como `forma semicanónica', na falta de melhor nome. Sugestões são aceites.
	
	O que foi até agora descrito é o tipo mais simples possível de tradução de um problema a outro: trocar as condições por condições equivalentes, e substituir `maximizar $f$' por `minimizar $-f$'.
	
	Este tipo de tradução tem a propriedade que não muda o conjunto admissível e conjunto solução, mashá traduções que não são tão triviais.
	
	\subsubsection{Adição de positividades (Forma canónica)}
	
	É, em muitos casos, útil estudar um problema de otimização em que sabemos que todas as variáveis são não-negativas. Assim sendo, vamos agora ver que podemos sempre, sem perda de generalidade, assumir que o nosso pol é da forma
	
	\[
	\begin{cases}
	\max\limits_x cx\\
	Ax \leq b\\
	x \geq 0
	\end{cases}
	\]
	
	O truque é modificar o conjunto em que estamos.
	
	Dado um número real $x$, define-se a sua parte positiva, $x^+$, como
	
	\[
	x^+ =
	\begin{cases}
	x & \text{se } x \geq 0 \\
	0 & \text{caso contrário}
	\end{cases}
	\]
	
	e a parte negativa, $x^-$, como
	
	\[
	x^- =
	\begin{cases}
	0 & \text{se } x \geq 0 \\
	-x & \text{caso contrário}
	\end{cases}
	\]
	
	Dado um vetor $x \in \R^n$, define-se $x^+$ como o vetor das partes positivas de $x$, e $x^-$ como o vetor das partes negativas. É claro que $x = x^+ - x^-$, e $x^+, x^- \geq 0$. Isto permite-nos escrever qualquer vetor como a diferença de dois vetores não-negativos.
	
	Assim sendo, considere-se a condição $Ax \leq b$. Esta condição é equivalente a $Ax^+ - Ax^-) \leq b$, com $x^+, x^- \geq 0$. Para mais, $cx = cx^+ - cx^-$, pelo que isto sugere a consideração de transformar o pol
	
	\[
	P =
	\begin{cases}
	\max\limits_x cx\\
	Ax \leq b
	\end{cases}
	\]
	
	em
	
	\[
	Q =
	\begin{cases}
	\max\limits_{(x_+, x_-)} cx_+ - cx_-\\
	Ax_+ - Ax_- \leq b\\
	x_+, x_- \geq 0
	\end{cases}
	\]
	
	(Aqui, $(x_+,x_-)$ representa apenas um vetor, de dimensão igual ao dobro da de $x$. O $+$ e $-$ em subscrito é suposto ser sugestivo de que um deles é a parte positiva e o outro a parte negativa de $x$.)
	
	Repare-se que este segundo pol não tem a mesma dimensão que o primeiro: se no primeiro, o vetor $x$ pertence a $\R^n$, no segundo, o vetor $(x_+, x_-)$ pertence a $\R^{2n}$. Portanto, não é imediatamente óbvio que estes são `o mesmo' pol, pelo que vamos fazer a seguinte definição:
	
	\begin{definition}
	Dados dois problemas de otimização linear, $P$ e $Q$, dizemos que \emph{$Q$ é uma $f$-tradução de $P$} se se for possível resolver $P$ sabendo a resposta de $Q$, usando $f$.
	
	Em termos mais precisos, se $f$ é uma função sobrejetiva $X_Q \rightarrow X_P$ tal que $q \in X_Q$ tem uma pontuação melhor que $q' \in X_Q$ (menor se $Q$ é de minimzação, maior se maximização) sse $f(q)$ tem melhor pontuação que $f(q')$.
	\end{definition}
	
	Esta definição tem interesse devido à seguinte proposição:
	
	\begin{prop}
	Se $Q$ é uma $f$-tradução de $P$, $S_Q = f(S_P)$.
	\end{prop}
	\begin{proof}
	Basta reparar que, por definição, $x \in S_Q$ sse $x$ tem pontuação melhor ou igual que $y$ para todo $y \in X_Q$, sse $f(x)$ tem pontuação melhor que $f(y)$ para todo $y \in X_Q$. Queremos então mostrar que isto é sse $f(x) \in S_P$.
	
	Como $f$ é sobrejetivo, isto implica que $f(x)$ tem pontuação melhor ou igual que todo $z$ em $X_P$, o que por definição implica $f(x) \in S_P$. Pelo outro lado, se houver $y \in X_Q$ tal que $f(y)$ tem pontuação melhor que $f(x)$, então $f(x)$ claramente não pode ser solução, pois $f(y)$ é admissível de pontuação melhor que ele.
	\end{proof}
	
	Isto mostra que se resolvermos uma tradução de um pol, é fácil recuperar a solução e conjunto admissível do problema original.
	
	O caso anterior, em que $X_P = X_Q$ e $S_P = S_Q$ é o caso trivial em que $f$ é a identidade. Neste caso, em que pretendemos adicionar a condição de positividade, é ligeiramente mais complicado.
	
	Vamos mostrar que, para o $P$ e $Q$ definidos em cima, $Q$ é uma $f$-tradução de $P$, em que $f$ é a função $f(x_+, x_-) = x_+ - x_-$.
	
	\begin{proof}
	Primeiro, mostre-se que se um vetor pertence a $X_Q$, a sua imagem pertence a $X_P$.
	
	Repare-se que, se $(x_+, x_-) \in X_Q$, então a sua imagem é $f(x_+, x_-) = x_+ - x_-$. Por definição, estes satisfazem $A(x_+ - x_-) \leq b$, donde $A f(x) \leq b$, que é a condição para $f(x) \in X_P$.
	
	Para mostrar sobrejetividade, repare-se que se $x \in X_P$, tem-se $(x^+, x^-) \in X_Q$, e $f(x^+, x^-) = x^+ - x^- = x$.
	
	Agora, queremos mostrar que $(x_+, x_-)$ tem pontuação melhor que $(y_+, y_-)$ sse $f(x_+, x_-)$ tem pontuação melhor que $f(y_+, y_-)$. Mas isto é trivial, pois a pontuação de $f(x_+, x_-)$ é a mesma que a de $(x_+, x_-)$, e o objetivo é, tanto em $P$ como em $Q$, maximizar.
	\end{proof}
	
	Assim sendo, podemos sempre assumir, sem perda de generalidade, que qualquer problema que tenhamos está na chamada \emph{forma canónica}, isto é, é da forma
	
	\[
	\begin{cases}
	\max\limits_x cx\\
	Ax \leq b\\
	x \geq 0
	\end{cases}
	\]
	
	\subsubsection{Desigualdades para igualdades (Forma padrão)}
	
	Outra forma útil de expressar um problema de otimização linear é a chamada forma padrão, da forma seguinte:
	
	\[
	\begin{cases}
	\min\limits_x cx\\
	Ax = b\\
	x \geq 0
	\end{cases}
	\]
	
	Já sabemos que podemos supor que os nossos problemas estão na forma canónica, sem perda de generalidade. Portanto, considere-se o pol
	
	
	\[
	P =
	\begin{cases}
	\max\limits_x cx\\
	Ax \leq b\\
	x \geq 0
	\end{cases}
	\]
	
	E vamos reescrevê-lo na forma padrão.
	
	Para fazer a tradução, é preciso representar desigualdades com igualdades. Para isso, repare-se que $a \leq b$ é a mesma coisa que dizer que $a + y = b$, para algum $y$ não-negativo. Assim, adicionamos as chamadas \emph{variáveis de folga}: Considere-se o pol
	
	\[
	Q =
	\begin{cases}
	\min\limits_{(x,y)} -cx\\
	Ax + y = b\\
	x, y \geq 0
	\end{cases}
	\]
	
	Vamos mostrar que $Q$ é uma $f$-tradução de $P$, com $f(x,y) = x$.
	
	\begin{proof}
	Primeiramente, verifique-se que se $(x,y) \in X_Q$ se tem $f(x,y) \in X_P$. Repare-se que a condição $f(x,y) \geq 0$ é trivial, pois $x \geq 0$ por hipótese, e a condição $A f(x,y) \leq 0$ é verídica pois $A f(x,y) = Ax \leq Ax + y = b$.
	
	De seguida, é preciso verificar sobrejetividade. Suponhamos que se quer um objeto cuja imagem sob $f$ seja $x \in X_P$. Considere-se, então, o vetor $(x,y)$, com $y = b - Ax$. Repare-se que este vetor pertence a $X_Q$, e a sua imagem é precisamente $x$, como queríamos demonstrar.
	
	Finalmente, provemos que $(x,y)$ tem melhor pontuação que $(x',y')$ em $Q$ sse $x$ tem melhor pontuação que $x'$ em P.
	
	Mas isto é trivial, pois $(x,y)$ tem melhor pontuação que $(x',y')$ sse $-cx < -cx'$ sse $cx > cx'$, como queríamos demonstrar.
	\end{proof}
	
	Isto mostra, então, que qualquer pol tem uma tradução para um pol na forma padrão.
	
	\subsubsection{Padrão para Canónico}
	
	Viu-se agora uma forma para traduzir problemas da forma canónica para a forma padrão. É possível, também, passar da forma padrão para a canónica (provou-se, aliás, que é possível passar de qualquer pol para a forma canónica) usando os procedimentos usados antes.
	
	No entanto, é muito mais económico fazer o processo simples de transformar todas as igualdades em desigualdades do tipo $\leq$. Ou seja, passar de:
	
	\[
	\begin{cases}
	\min\limits_x cx\\
	Ax = b\\
	x \geq 0
	\end{cases}
	\]
	
	Para
	
	\[
	\begin{cases}
	\max\limits_x -cx\\
	Ax \leq b\\
	-Ax \leq -b\\
	x \geq 0
	\end{cases}
	\]
	
	Já vimos antes que estas traduções são válidas.
	
	\section{Noções Topológicas}
	
	\subsection{Prerequisitos}
	
	Para ler esta secção, é recomendado (i.e. necessário) que o leitor saiba os seguintes conceitos topológicos em $\R^n$:
	
	Conceito de conjunto aberto e conjunto fechado; interior, fronteira e extrior de um conjunto; função contínua; teorema de Bolzano e Weierstrass em $\R^n$
	
	\subsection{Intuição geométrica}
	
	Esta secção é dedicada a dar intuição geométrica para motivar os teoremas que se seguem. Vamos, a título de exemplo, partir de um pol específico a duas dimensões na forma canónica.
	
	Considere-se o pol
	
	\[
	P =
	\begin{cases}
	\max\limits_(x,y) 2x + y\\
	x + 2y \leq 8\\
	x - y \leq 2 \\
	x, y \geq 0
	\end{cases}
	\]
	
	Vamos representar, no plano cartesiano, a região admissível $X_P$ e o vetor $c^T = (2,1)$.
	
	\begin{tikzpicture}
	\draw[->] (-2, 0) -- (6, 0) node[anchor=south] {x};
	\draw[->] (0, -1) -- (0, 5) node[anchor=west] {y};
	\filldraw[color=red, fill=blue!80, very thick] (0,0) node[anchor=north west, color=black]{0} -- (0,4) node[anchor=east, color=black]{(0,4)} -- (4,2) node[anchor=north west, color=black]{\,(4,2)} -- (2,0) node[anchor=north, color=black]{(2,0)} -- (0,0);
	
	\draw[->, color=green, very thick] (4,2) -- (6,3) node[anchor=west, color=black]{$c^T = (2,3)$};
	\draw[very thick, color=green] (3.5,3) -- (4.5,1);
	\end{tikzpicture}
	
	Uma interpretação para o conjunto solução $S_P$ é o conjunto de vetores admissíveis que maximiza o produto escalar com $c^T$. Intuitivamente, os vetores que `estão o mais possível na direção de $c^T$'.
	
	É possível ver (isto em termos intuitivos, claro) que não há nenhum vetor admissível `para lá' da linha verde desenhada, o que indica que o conjunto solução será o conjunto $\{(4,2)\}$.
	
	Neste caso, o conjunto solução tem apenas um elemento, mas é concebível uma situação em que tivesse mais. Por exemplo, se o vetor $c^T$ estivesse perpendicular ao lado $(0,4)-(4,2)$.
	
	Isto é só especulação com base num desenho, mas dita especulação pode ser útil para motivar conclusões.
	
	E.g., com base nestas considerações, seria de esperar que, por exemplo, em geral o conjunto solução estará contido na fronteira do conjunto solução, o que quer que isso signifique (a área marcada a vermelho na imagem). Tambem é fácil uma pessoa convencer-se que tem necessáriamente de conter pelo menos um dos vértices -- novamente, o que quer que isso signifique.
	
	Seria também de esperar que se o conjunto admissível é limitado e não-vazio, solução existe necessáriamente. E, já agora, que o conjunto admissível é convexo.
	
	Todos estes factos aleatórios serão provados, e mais, e alguns deles provar-se-ão úteis na procura de formas de resolver problemas de otimização.
	
	\subsection{Factos introdutórios}
	
	Recorde-se o leitor da definição de interior, fronteira e exterior de conjunto, e da definição de conjunto aberto e fechado.
	
	\begin{prop}
		Fixo um pol $P$, $X_P$ e $S_P$ são fechados.
	\end{prop}
	
	\begin{proof}
	Primeiramente, mostre-se que $X_P$ é fechado.
	
	Recorde-se que interseções finitas de fechados são fechadas. De seguida, note-se que, dado um pol $P$ (que podemos supor sem perda de generalidade estar na forma semicanónica. Assim, o conjunto admissível é o conjunto de $x \in \R^n$ que satisfazem as condições
	
	\[a_i x \leq b_i \text{ para $i = 1, 2, \cdots, m$}\]
	
	Onde os $a_i$ são vetores-linha, e os $b_i$ são escalares.
	
	Ou seja, $X_P$ é a interseção
	
	\[\bigcap_{i=1}^m \{\,x \in \R^n \mid a_i x \leq b_i \,\}\]
	
	Repare-se agora que $\{\,x \in \R^n \mid a_i x \leq b_i \,\}$ é a pré-imagem sob uma função linear (e então contínua) de um conjunto fechado ($]-\infty, b_i]$), pelo que usando Cálculo II se conclui que estes conjuntos são todos fechados, pelo que $X_P$ é fechado.
	
	Para mostrar que $S_P$ é fechado, repare-se que há dois casos: ou $S_P$ é vazio, e então fechado; ou contém pelo menos um elemento $s$. Neste último caso, $S_P = X_P \cap \{\,x \mid c^T x \geq c^T s\,\}$ por definição, e isto é a interseção de dois conjuntos fechados, e então fechado.
	\end{proof}

\end{document}